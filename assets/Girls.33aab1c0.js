import{e as x,u as v,o as i,c as a,a as n,F as g,r as y,t as u,d as b,n as h,f as p}from"./index.a6ebe978.js";const f={"1-2":1,"3-6":2,"7-10":3,"11-14":4,"15+":5};async function B(s,e,t,r,o){const{supabase:l}=x();let{data:d,error:c}=await l.rpc("increment5",{q_age:t,q_box_number:r,q_gender:e,q_year:o,x:s});return d}async function m(s,e,t){const{supabase:r}=x();let{data:o,error:l}=await r.from("giant_boxes").select("box_count").match({gender:s,box_age:e,year:t});return o.map(c=>c.box_count)}async function C(s,e,t){const{supabase:r}=x();let l=(await m(s,e,t)).length+1,d=`${s}-${f[e]}-${t}`;console.log("name testing",d);const{data:c,error:J}=await r.from("giant_boxes").insert([{gender:s,box_age:e,year:t,box_number:l,name:d}]);return console.log("creat box",c),!0}const w={class:"flex flex-col absolute z-20"},k=["onClick","id"],I={class:"w-screen flex flex-col sm:items-center items-end"},A={class:"relative w-3/5 mr-6 sm:mr-0 flex justify-center text-2xl my-2"},D={class:"flex"},_={class:"flex flex-col justify-center minus-buttons tally-button mr-2"},$={class:"relative h-60 w-44 xs:w-80 mx-3 flex-col justify-center bg-pink-300 rounded-lg shadow-xl shadow-slate-300/60"},G={class:"flex justify-center items-center px-7 pt-9 pb-2 mx-7 mt-5"},S={class:"text-6xl text-center text-white mt-8"},L={class:"relative sm:w-80 w-3/5 mr-6 sm:mr-0 flex justify-center text-2xl my-2"},j={class:"relative mr-6 sm:mr-0 flex justify-center my-2"},M=["onClick"],N=p('<div><div class="grid grid-cols-6"><div class="text-center p-2 border-b-4 border-gray-500">Kyn</div><div class="text-center p-2 border-b-4 border-gray-500">Aldur</div><div class="text-center p-2 border-b-4 border-gray-500">Kassi #</div><div class="text-center p-2 border-b-4 border-gray-500">A\xF0ger\xF0</div><div class="text-center p-2 border-b-4 border-gray-500">Sta\xF0a</div><div class="text-center p-2 border-b-4 border-gray-500">T\xEDmi</div></div><div id="historyTable" class="w-full"></div></div><div class="m-6 p-6">footer</div>',2),q={data(){return{ages:["1-2 \xE1ra","3-6 \xE1ra","7-10 \xE1ra","11-14 \xE1ra","15+ \xE1ra"],agesCategories:["1-2","3-6","7-10","11-14","15+"],ageIndex:0,genderCategories:["stelpur","str\xE1kar"],genderDBCategories:["girls","boys"],genderIndex:0,fetchData:null,fetchBoxNumber:null,fetchBoxCounter:0,supabaseBoxCounter:0,currentUser:"logi",fetchAvailableGiantBoxes:[],boxIndex:0,historyLogs:[],historyLogsIce:[],historyLogsString:"",historyLogsIceCopy:[],sbBoxCounters:[]}},async created(){await this.fetchAllBoxes("girls","1-2","2022")},computed:{isMobile(){return window.innerWidth<520},currentGender(){return this.genderCategories[this.genderIndex]},currentAge(){return this.ages[this.ageIndex]},currentDbGender(){return this.genderDBCategories[this.genderIndex]},currentDbAge(){return this.agesCategories[this.ageIndex]},currentCount(){return this.sbBoxCounters[this.boxIndex]}},methods:{async updateBoxCounter(s,e,t,r,o){B(s,e,t,r,o).then(l=>this.sbBoxCounters[this.boxIndex]=l)},async fetchAllBoxes(s,e,t){m(s,e,t).then(r=>{this.sbBoxCounters=r,console.log("got data",r)}).then(()=>this.boxIndex=this.sbBoxCounters.length-1)},addToBox(s){const e={gender:this.currentDbGender,age:this.currentDbAge,box_number:this.boxIndex+1,increment:s};JisDataServices.addToBox(JSON.stringify(e)).then(t=>{this.fetchBoxCounter=t.data,this.fetchAvailableGiantBoxes[this.boxIndex]=t.data}).then(()=>this.getHistory())},async getHistory(){JisDataServices.getHistory().then(s=>{console.log("history response",s.data),this.historyLogs=[],s.data.forEach(e=>{this.historyLogs.push(e)})}).then(()=>this.historyLogsString=JSON.stringify(this.historyLogs))},async tallyButton(s){await this.updateBoxCounter(s,this.currentDbGender,this.currentDbAge,this.boxIndex+1,"2022")},async addGiantBox(){await C(this.currentDbGender,this.currentDbAge,"2022"),this.fetchAllBoxes(this.currentDbGender,this.currentDbAge,"2022")},async ageButton(s){this.fetchAllBoxes("girls",this.agesCategories[s],"2022"),this.ageIndex=s},changeBoxIndex(s){this.boxIndex=s}},watch:{}},H=Object.assign(q,{__name:"Girls",setup(s){return v(),(e,t)=>(i(),a(g,null,[n("div",w,[(i(!0),a(g,null,y(e.agesCategories,(r,o)=>(i(),a("button",{onClick:l=>e.ageButton(o),class:h([{"bg-pink-400":o===e.ageIndex,"text-white":o===e.ageIndex},"target:bg-pink-200 sidebar-item border rounded p-2 m-2 w-36 h-16 text-center shadow-xl hover:bg-pink-300 hover:text-white"]),key:`age-${o}`,id:`${r}`},u(r)+" \xE1ra ",11,k))),128))]),n("div",I,[n("div",A," Stelpur "+u(e.currentAge),1),n("div",D,[n("div",_,[e.isMobile?b("",!0):(i(),a("button",{key:0,class:"text-white rounded p-2 my-2 bg-red-500",onClick:t[0]||(t[0]=r=>e.tallyButton(-1))}," -1 ")),e.isMobile?b("",!0):(i(),a("button",{key:1,class:"text-white rounded p-2 my-2 bg-red-500",onClick:t[1]||(t[1]=r=>e.tallyButton(-5))}," -5 "))]),n("div",$,[n("div",G,[n("p",S,u(e.currentCount),1)])]),n("div",{class:h([{"mr-2":e.isMobile},"flex flex-col justify-center minus-buttons tally-button ml-2"])},[e.isMobile?(i(),a("button",{key:0,class:"text-white rounded p-2 my-2 bg-red-500",onClick:t[2]||(t[2]=r=>e.tallyButton(-1))}," -1 ")):b("",!0),e.isMobile?(i(),a("button",{key:1,class:"text-white rounded p-2 my-2 bg-red-500",onClick:t[3]||(t[3]=r=>e.tallyButton(-5))}," -5 ")):b("",!0),n("button",{class:"text-white rounded p-2 my-2 bg-green-500",onClick:t[4]||(t[4]=r=>e.tallyButton(1))}," +1 "),n("button",{class:"text-white rounded p-2 my-2 bg-green-500",onClick:t[5]||(t[5]=r=>e.tallyButton(5))}," +5 ")],2)]),n("div",L," Kassi #"+u(e.boxIndex+1),1),n("div",j,[n("button",{onClick:t[6]||(t[6]=r=>e.addGiantBox()),class:"m-1 p-2 border shadow-xl rounded hover:bg-gray-400 hover:text-white"}," B\xFAa til kassa "),(i(!0),a(g,null,y(e.sbBoxCounters,(r,o)=>(i(),a("button",{onClick:l=>e.changeBoxIndex(o),key:r+o,class:h([{"bg-pink-400":o===e.boxIndex,"text-white":o===e.boxIndex},"m-1 p-2 px-4 border shadow-xl rounded hover:bg-pink-300 hover:text-white"])},u(o+1),11,M))),128))]),N])],64))}});export{H as default};

import{g as u,i as m,b as f,t as v,c as B}from"./UseData.2a2aaaea.js";import{u as C,o as i,c as a,a as r,F as h,r as g,t as l,e as d,n as c,f as p}from"./index.4e64a64d.js";const w={class:"flex flex-col absolute z-20"},k=["onClick","id"],I={class:"w-screen flex flex-col sm:items-center items-end"},T={class:"relative w-3/5 mr-6 sm:mr-0 flex justify-center text-2xl my-2"},A={class:"flex"},D={class:"flex flex-col justify-center minus-buttons tally-button mr-2"},G={class:"relative h-60 w-44 xs:w-80 mx-3 flex-col justify-center bg-pink-300 rounded-lg shadow-xl shadow-slate-300/60"},S={class:"flex justify-center items-center px-7 pt-9 pb-2 mx-7 mt-5"},L={class:"text-6xl text-center text-white mt-8"},$={class:"relative sm:w-80 w-3/5 mr-6 sm:mr-0 flex justify-center text-2xl my-2"},j={class:"relative mr-6 sm:mr-0 flex justify-center my-2"},M=["onClick"],N=p('<div class="mt-2"><div class="grid grid-cols-6"><div class="text-center p-2 border-b-4 border-gray-500">Kyn</div><div class="text-center p-2 border-b-4 border-gray-500">Aldur</div><div class="text-center p-2 border-b-4 border-gray-500">Kassi #</div><div class="text-center p-2 border-b-4 border-gray-500">A\xF0ger\xF0</div><div class="text-center p-2 border-b-4 border-gray-500">Sta\xF0a</div><div class="text-center p-2 border-b-4 border-gray-500">T\xEDmi</div></div><div id="historyTable" class="w-full"></div></div>',1),E={class:"m-6 p-6"},H={data(){return{ages:["1-2 \xE1ra","3-6 \xE1ra","7-10 \xE1ra","11-14 \xE1ra","15+ \xE1ra"],agesCategories:["1-2","3-6","7-10","11-14","15+"],ageIndex:0,genderCategories:["stelpur","str\xE1kar"],genderDBCategories:["girls","boys"],genderIndex:0,fetchData:null,fetchBoxNumber:null,fetchBoxCounter:0,supabaseBoxCounter:0,currentUser:"logi",fetchAvailableGiantBoxes:[],boxIndex:0,historyLogs:[],historyLogsIce:[],historyLogsString:"",historyLogsIceCopy:[],sbBoxCounters:[],historyTable:"",fetchTotalCount:0}},async created(){await this.fetchAllBoxes("girls","1-2","2022");const{data:e,table:t}=await u();this.historyTable=t,await this.getTotalBoxCount("2022")},computed:{isMobile(){return window.innerWidth<520},currentGender(){return this.genderCategories[this.genderIndex]},currentAge(){return this.ages[this.ageIndex]},currentDbGender(){return this.genderDBCategories[this.genderIndex]},currentDbAge(){return this.agesCategories[this.ageIndex]},currentCount(){return this.sbBoxCounters[this.boxIndex]}},methods:{async updateBoxCounter(e,t,s,o,n){await m(e,t,s,o,n).then(y=>this.sbBoxCounters[this.boxIndex]=y);const{data:b,table:x}=await u();this.historyTable=x},async fetchAllBoxes(e,t,s){f(e,t,s).then(o=>{this.sbBoxCounters=o}).then(()=>this.boxIndex=this.sbBoxCounters.length-1)},async getTotalBoxCount(e){v(e).then(t=>this.fetchTotalCount=t)},addToBox(e){const t={gender:this.currentDbGender,age:this.currentDbAge,box_number:this.boxIndex+1,increment:e};JisDataServices.addToBox(JSON.stringify(t)).then(s=>{this.fetchBoxCounter=s.data,this.fetchAvailableGiantBoxes[this.boxIndex]=s.data}).then(()=>this.getHistory())},async getHistory(){JisDataServices.getHistory().then(e=>{console.log("history response",e.data),this.historyLogs=[],e.data.forEach(t=>{this.historyLogs.push(t)})}).then(()=>this.historyLogsString=JSON.stringify(this.historyLogs))},async tallyButton(e){await this.updateBoxCounter(e,this.currentDbGender,this.currentDbAge,this.boxIndex+1,"2022")},async addGiantBox(){Swal.fire({title:"Viltu b\xFAa til n\xFDjan tr\xF6lla kassa?",icon:"question",showCancelButton:!0,confirmButtonColor:"#22C55E",cancelButtonColor:"#EF4444",cancelButtonText:"Nei ekki n\xFAna",confirmButtonText:"J\xE1 endilega!"}).then(async e=>{if(e.isConfirmed){console.log("swal ok");try{const t=await B(this.currentDbGender,this.currentDbAge,"2022");console.log("add giant box:",t),this.fetchAllBoxes(this.currentDbGender,this.currentDbAge,"2022");const{d:s,table:o}=await u();this.historyTable=o}catch(t){console.log(t),Swal.fire({icon:"error",title:"Villa kom upp",text:"Ekki t\xF3kst a\xF0 b\xFAa til n\xFDjan tr\xF6llakassa!",footer:'<a href="mailto: logiharaldss@gmail.com">Hafa samband - logiharaldss@gmail.com</a>'})}}})},async ageButton(e){this.fetchAllBoxes("girls",this.agesCategories[e],"2022"),this.ageIndex=e},changeBoxIndex(e){this.boxIndex=e}},watch:{historyTable(e){const t=document.getElementById("historyTable");t.innerHTML=e}}},_=Object.assign(H,{__name:"Girls",setup(e){return C(),(t,s)=>(i(),a(h,null,[r("div",w,[(i(!0),a(h,null,g(t.agesCategories,(o,n)=>(i(),a("button",{onClick:b=>t.ageButton(n),class:c([{"bg-pink-400":n===t.ageIndex,"text-white":n===t.ageIndex},"target:bg-pink-200 sidebar-item border rounded p-2 m-2 w-36 h-16 text-center shadow-xl hover:bg-pink-300 hover:text-white"]),key:`age-${n}`,id:`${o}`},l(o)+" \xE1ra ",11,k))),128))]),r("div",I,[r("div",T," Stelpur "+l(t.currentAge),1),r("div",A,[r("div",D,[t.isMobile?d("",!0):(i(),a("button",{key:0,class:"text-white rounded p-2 my-2 bg-red-500",onClick:s[0]||(s[0]=o=>t.tallyButton(-1))}," -1 ")),t.isMobile?d("",!0):(i(),a("button",{key:1,class:"text-white rounded p-2 my-2 bg-red-500",onClick:s[1]||(s[1]=o=>t.tallyButton(-5))}," -5 "))]),r("div",G,[r("div",S,[r("p",L,l(t.currentCount),1)])]),r("div",{class:c([{"mr-2":t.isMobile},"flex flex-col justify-center minus-buttons tally-button ml-2"])},[t.isMobile?(i(),a("button",{key:0,class:"text-white rounded p-2 my-2 bg-red-500",onClick:s[2]||(s[2]=o=>t.tallyButton(-1))}," -1 ")):d("",!0),t.isMobile?(i(),a("button",{key:1,class:"text-white rounded p-2 my-2 bg-red-500",onClick:s[3]||(s[3]=o=>t.tallyButton(-5))}," -5 ")):d("",!0),r("button",{class:"text-white rounded p-2 my-2 bg-green-500",onClick:s[4]||(s[4]=o=>t.tallyButton(1))}," +1 "),r("button",{class:"text-white rounded p-2 my-2 bg-green-500",onClick:s[5]||(s[5]=o=>t.tallyButton(5))}," +5 ")],2)]),r("div",$," Kassi #"+l(t.boxIndex+1),1),r("div",j,[r("button",{onClick:s[6]||(s[6]=o=>t.addGiantBox()),class:"m-1 p-2 border shadow-xl rounded hover:bg-gray-400 hover:text-white"}," B\xFAa til kassa "),(i(!0),a(h,null,g(t.sbBoxCounters,(o,n)=>(i(),a("button",{onClick:b=>t.changeBoxIndex(n),key:o+n,class:c([{"bg-pink-400":n===t.boxIndex,"text-white":n===t.boxIndex},"m-1 p-2 px-4 border shadow-xl rounded hover:bg-pink-300 hover:text-white"])},l(n+1),11,M))),128))]),N,r("div",E,l(t.fetchTotalCount),1)])],64))}});export{_ as default};

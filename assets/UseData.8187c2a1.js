import{u as d,b as i}from"./index.38ea802e.js";const{user:b}=d(),u={"1-2":1,"3-6":2,"7-10":3,"11-14":4,"15+":5};async function m(t,e,a,r,o){const{supabase:s}=i();let{data:n,error:c}=await s.rpc("increment5",{q_age:a,q_box_number:r,q_gender:e,q_year:o,x:t});return await l(b.value.email,e,a,r,t,n),n}async function p(t,e,a){const{supabase:r}=i();let{data:o,error:s}=await r.from("giant_boxes").select("box_count").match({gender:t,box_age:e,year:a}).order("box_number",{ascending:!0});return o.map(c=>c.box_count)}async function y(t,e,a){const{supabase:r}=i();let s=(await p(t,e,a)).length+1,n=`${t}-${u[e]}-${a}`;const{data:c,error:g}=await r.from("giant_boxes").insert([{gender:t,box_age:e,year:a,box_number:s,name:n}]);return await l(b.value.email,t,e,s,"n\xFDr kassi",0),c}async function l(t,e,a,r,o,s){const{supabase:n}=i(),{data:c,error:g}=await n.from("counter_log").insert([{user_name:t,gender:e,age:a,giant_box_id:r,action:o,counter_change:s,action_time:new Date}]);return c}async function x(){const{supabase:t}=i();let{data:e,error:a}=await t.from("counter_log").select("*").limit(15).order("id",{ascending:!1}),r="";return e.forEach((o,s)=>{let n=o.gender==="girls"?"text-pink-500":"text-blue-500",c=`
      <div class="grid grid-cols-6">
      <div class="text-center p-2 pb-3 border-b-2 border-gray-500 ${n} ${s%2!==0?"bg-gray-100":""}">${o.gender==="girls"?"Stelpur":"Str\xE1kar"}</div>
      <div class="text-center p-2 pb-3 border-b-2 border-gray-500 ${n} ${s%2!==0?"bg-gray-100":""}">${o.age}</div>
                <div class="text-center p-2 pb-3 border-b-2 border-gray-500 ${n} ${s%2!==0?"bg-gray-100":""}">${o.giant_box_id}</div>
      <div class="text-center p-2 pb-3 border-b-2 border-gray-500 ${n} ${s%2!==0?"bg-gray-100":""}">${o.action}</div>
                <div class="text-center p-2 pb-3 border-b-2 border-gray-500 ${n} ${s%2!==0?"bg-gray-100":""}">${o.counter_change}</div>
      <div class="text-center p-2 pb-3 border-b-2 border-gray-500 ${n} ${s%2!==0?"bg-gray-100":""}">${dayjs(o.action_time).format("HH:mm:ss - D MMM")}</div>
      </div>`;r+=c}),{data:e,table:r}}async function $(t){const{supabase:e}=i();let{data:a,error:r}=await e.rpc("total_boxes",{q_year:t});return console.log(" total boxes:",a),a}async function f(t,e){const{supabase:a}=i();let{data:r,error:o}=await a.rpc("total_gender",{q_year:t,q_gender:e});return console.log(" total gender:",r),r}async function v(t){const{supabase:e}=i();let{data:a,error:r}=await e.rpc("get_total_group_gender",{q_year:t});return console.log(" total gender:",a),a}export{f as a,v as b,p as c,y as d,x as g,m as i,$ as t};
